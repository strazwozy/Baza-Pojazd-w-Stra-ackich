<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>üöí Baza woz√≥w stra≈ºackich</title>
<style>
* { box-sizing: border-box; margin:0; padding:0; }
html, body { width:100%; font-family: Arial; background:#1a1a1a; color:white; padding:20px; }

h1 { text-align:center; margin-bottom:20px; font-size:32px; }

#search, #filterWoj, #sortBy, #sortDir {
    margin:10px 5px;
    padding:5px;
    font-size:16px;
    border-radius:6px;
    border:1px solid #ccc;
}
#sortBy, #sortDir { background:#b30000; color:white; }

#lista { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-bottom:20px; }
.woz {
    background:#2a2a2a; padding:10px; border-radius:8px;
    display:flex; flex-direction: column; align-items:center;
    width:200px; cursor:pointer; transition:transform 0.2s;
}
.woz:hover { transform:scale(1.05); }
.woz img { width:180px; height:120px; object-fit:cover; border-radius:6px; }
.woz-info { width:100%; font-size:14px; }

.status { font-weight:bold; }

#pagination { display:flex; justify-content:center; gap:6px; flex-wrap:wrap; }
.page-btn { padding:6px 10px; border:none; border-radius:6px; background:#b30000; color:white; cursor:pointer; }
.page-btn.disabled { background:#555; cursor:default; }

#lightbox {
    display:none; position:fixed; inset:0;
    background:rgba(0,0,0,.95);
    justify-content:center; align-items:center; z-index:1000;
}
#lightboxContent {
    background:#1a1a1a;
    width:95%; height:95%;
    display:flex; border-radius:15px; overflow:hidden;
}
#lightboxImg { max-width:80%; object-fit:contain; background:black; }
#lightboxInfo { flex:1; overflow-y:auto; }
#lightboxTitle { background:#E60000; padding:15px; text-align:center; font-size:26px; }

.detail-row { display:flex; border-bottom:1px solid #444; padding:5px 0; }
.detail-label { width:140px; font-weight:bold; }

#closeLightbox {
    position:absolute; top:10px; right:15px;
    background:#b30000; width:40px; height:40px;
    border-radius:50%; display:flex;
    justify-content:center; align-items:center;
    cursor:pointer; font-size:30px;
}

.osp-link {
    text-decoration:underline;
    cursor:pointer;
    color:inherit;
}
</style>
</head>
<body>

<h1>üöí Baza woz√≥w stra≈ºackich</h1>

<input id="search" placeholder="Szukaj...">
<select id="filterWoj">
  <option value="">Wszystkie wojew√≥dztwa</option>
  <option value="Mazowieckie">Mazowieckie</option>
</select>

<select id="sortBy">
  <option value="ID">ID</option>
  <option value="Jednostka">Jednostka</option>
  <option value="Marka">Marka</option>
  <option value="Rok produkcji">Rok</option>
</select>

<select id="sortDir">
  <option value="asc">‚¨ÜÔ∏è RosnƒÖco</option>
  <option value="desc">‚¨áÔ∏è MalejƒÖco</option>
</select>

<div id="lista"></div>
<div id="pagination"></div>

<div id="lightbox">
  <div id="lightboxContent">
    <span id="closeLightbox">&times;</span>
    <img id="lightboxImg">
    <div id="lightboxInfo">
      <h2 id="lightboxTitle"></h2>
      <div id="lightboxDetails"></div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
<script>
const csvUrl = 'https://docs.google.com/spreadsheets/d/1-INf04fbUF_z3l7kUvIr4dm1lv7iJWMVmw-ICWbDfkI/export?format=csv';
let currentPage=1, itemsPerPage=80, filteredWozki=[], lightboxIndex=0, filterField=null;

Papa.parse(csvUrl,{
 download:true, header:true,
 complete:r=>{ window.wozy=r.data; displayWozow(); }
});

function displayWozow(){
 const sortBy=sortByEl.value, dir=sortDir.value;
 window.wozy.sort((a,b)=>{
   const A=(a[sortBy]||'').toString().toLowerCase();
   const B=(b[sortBy]||'').toString().toLowerCase();
   return dir==='asc'
     ? A.localeCompare(B,undefined,{numeric:true})
     : B.localeCompare(A,undefined,{numeric:true});
 });

 filteredWozki=window.wozy;
 lista.innerHTML='';
 filteredWozki.slice((currentPage-1)*itemsPerPage,currentPage*itemsPerPage)
 .forEach((w,i)=>{
   const d=document.createElement('div');
   d.className='woz';
   d.innerHTML=`<strong>${w.ID}</strong><br>${w.Jednostka}`;
   d.onclick=()=>openLightbox(i);
   lista.appendChild(d);
 });
}

function openLightbox(i){
 const w=filteredWozki[i];
 lightbox.style.display='flex';
 lightboxTitle.textContent=`${w.Marka} (${w.ID})`;
 lightboxDetails.innerHTML='';
}

search.oninput=()=>{currentPage=1;displayWozow();}
sortByEl=sortBy; sortDir=sortDir;
sortBy.onchange=sortDir.onchange=()=>displayWozow();
closeLightbox.onclick=()=>lightbox.style.display='none';
</script>
</body>
</html>

</body>
</html>
