<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>üöí Baza woz√≥w stra≈ºackich</title>

<style>
body {
    font-family: Arial, sans-serif;
    background:#f2f2f2;
    margin:0;
    padding:20px;
}

h1 {
    text-align:center;
    margin-bottom:20px;
}

/* formularze */
#search, #filterWoj, #sortBy {
    margin:5px;
    padding:6px;
    font-size:16px;
    border-radius:6px;
    border:1px solid #ccc;
}

#sortBy {
    background:#b30000;
    color:white;
}

/* lista */
#lista {
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    justify-content:center;
}

.woz {
    width:200px;
    background:white;
    padding:10px;
    border-radius:8px;
    box-shadow:0 2px 5px rgba(0,0,0,0.2);
    cursor:pointer;
    display:flex;
    flex-direction:column;
    align-items:center;
}

.woz img {
    width:180px;
    height:120px;
    object-fit:cover;
    border-radius:6px;
    margin-bottom:8px;
}

.woz-info {
    width:100%;
    font-size:13px;
}

.status {
    font-weight:bold;
}

/* PAGINACJA */
#pagination {
    display:flex;
    justify-content:center;
    align-items:center;
    gap:20px;
    margin:20px 0;
}

#pagination button {
    padding:8px 14px;
    font-size:18px;
    border:none;
    border-radius:50%;
    cursor:pointer;
    background:#b30000;
    color:white;
}

#pagination span {
    font-weight:bold;
}

/* LIGHTBOX */
#lightbox {
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.9);
    z-index:1000;
    justify-content:center;
    align-items:center;
}

#lightboxContent {
    width:95%;
    height:95%;
    background:#1a1a1a;
    display:flex;
    border-radius:16px;
    overflow:hidden;
    position:relative;
}

#lightboxImg {
    width:60%;
    object-fit:contain;
    background:black;
}

#lightboxInfo {
    width:40%;
    display:flex;
    flex-direction:column;
    overflow-y:auto;
}

#lightboxTitle {
    background:#e60000;
    padding:18px;
    font-size:28px;
    text-align:center;
    color:white;
}

#lightboxDetails {
    padding:20px;
    display:flex;
    flex-direction:column;
    gap:12px;
    color:white;
}

.detail-row {
    display:flex;
    justify-content:space-between;
    border-bottom:1px solid rgba(255,255,255,0.2);
    padding-bottom:6px;
}

#closeLightbox {
    position:absolute;
    top:10px;
    right:15px;
    font-size:32px;
    background:none;
    border:none;
    color:white;
    cursor:pointer;
}

#prevBtn, #nextBtn {
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    font-size:50px;
    background:rgba(0,0,0,0.5);
    border:none;
    color:white;
    padding:20px;
    cursor:pointer;
}

#prevBtn { left:10px; }
#nextBtn { right:10px; }

/* mobile */
@media(max-width:900px){
    #lightboxContent { flex-direction:column; }
    #lightboxImg { width:100%; height:50%; }
    #lightboxInfo { width:100%; }
}
</style>
</head>

<body>

<h1>üöí Baza woz√≥w stra≈ºackich w Polsce</h1>

<input id="search" placeholder="Szukaj...">
<select id="filterWoj">
    <option value="">Wszystkie wojew√≥dztwa</option>
    <option>Ma≈Çopolskie</option>
    <option>Mazowieckie</option>
    <option>≈ölƒÖskie</option>
</select>

<select id="sortBy">
    <option value="ID">ID</option>
    <option value="Jednostka">Jednostka</option>
    <option value="Marka">Marka</option>
    <option value="Rejestracja">Rejestracja</option>
    <option value="Rok produkcji">Rok</option>
</select>

<div id="lista"></div>

<div id="pagination">
    <button id="prevPage">‚Üê</button>
    <span id="pageInfo"></span>
    <button id="nextPage">‚Üí</button>
</div>

<!-- LIGHTBOX -->
<div id="lightbox">
    <button id="prevBtn">‚Üê</button>

    <div id="lightboxContent">
        <button id="closeLightbox">&times;</button>
        <img id="lightboxImg">
        <div id="lightboxInfo">
            <div id="lightboxTitle"></div>
            <div id="lightboxDetails"></div>
        </div>
    </div>

    <button id="nextBtn">‚Üí</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
<script>
const csvUrl = "TU_WKLEJ_LINK_DO_CSV";
const perPage = 80;
let page = 1;
let data = [];
let filtered = [];
let lbIndex = 0;

Papa.parse(csvUrl,{
    download:true,
    header:true,
    complete:r=>{
        data = r.data;
        render();
    }
});

function statusColor(s){
    s=(s||"").toLowerCase();
    if(s==="czynny") return "lime";
    if(["wycofany ze s≈Çu≈ºby","sprzedany","rozbity","sp≈ÇonƒÖ≈Ç"].includes(s)) return "red";
    if(s==="przeniesiony") return "yellow";
    if(s==="obiekt muzeum") return "dodgerblue";
    if(s==="porzucony") return "orange";
    return "white";
}

function render(){
    const q = search.value.toLowerCase();
    const woj = filterWoj.value;
    const sort = sortBy.value;

    filtered = data.filter(w =>
        (!woj || w.Wojew√≥dztwo===woj) &&
        JSON.stringify(w).toLowerCase().includes(q)
    );

    filtered.sort((a,b)=>{
        if(sort==="ID") return a.ID-b.ID;
        return (a[sort]||"").localeCompare(b[sort]||"");
    });

    const start=(page-1)*perPage;
    const items=filtered.slice(start,start+perPage);
    lista.innerHTML="";

    items.forEach((w,i)=>{
        const d=document.createElement("div");
        d.className="woz";
        d.innerHTML=`
            <img src="${w.Zdjƒôcie||'https://via.placeholder.com/180x120'}">
            <div class="woz-info">
                <b>${w.Jednostka||"-"}</b><br>
                ${w.Marka||"-"} (${w["Rok produkcji"]||"-"})<br>
                <span class="status" style="color:${statusColor(w.Status)}">${w.Status||"-"}</span>
            </div>
        `;
        d.onclick=()=>openLightbox(start+i);
        lista.appendChild(d);
    });

    pageInfo.textContent = `Strona ${page} / ${Math.max(1,Math.ceil(filtered.length/perPage))}`;
}

function openLightbox(i){
    lbIndex=i;
    const w=filtered[i];
    lightboxImg.src=w.Zdjƒôcie;
    lightboxTitle.textContent="üöí "+(w.Marka||"-");
    lightboxDetails.innerHTML=Object.entries(w).map(
        ([k,v])=>`<div class="detail-row"><b>${k}</b><span style="color:${k==='Status'?statusColor(v):'white'}">${v||"-"}</span></div>`
    ).join("");
    lightbox.style.display="flex";
}

prevPage.onclick=()=>{ if(page>1){page--;render();}};
nextPage.onclick=()=>{ if(page<Math.ceil(filtered.length/perPage)){page++;render();}};
closeLightbox.onclick=()=>lightbox.style.display="none";
prevBtn.onclick=()=>openLightbox((lbIndex-1+filtered.length)%filtered.length);
nextBtn.onclick=()=>openLightbox((lbIndex+1)%filtered.length);

search.oninput=()=>{page=1;render();}
filterWoj.onchange=()=>{page=1;render();}
sortBy.onchange=render;

document.onkeydown=e=>{
    if(lightbox.style.display==="flex"){
        if(e.key==="ArrowLeft") prevBtn.click();
        if(e.key==="ArrowRight") nextBtn.click();
        if(e.key==="Escape") closeLightbox.click();
    }
};
</script>

</body>
</html>

</html>

